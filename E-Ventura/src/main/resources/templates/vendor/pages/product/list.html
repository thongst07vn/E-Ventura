<html xmlns:th="http://www.thymeleaf.org"
	th:replace="~{vendor/layouts/layout :: layout('Product List', ~{this :: .content-main})}">

<head>
	<title>Product List</title>
</head>

<body>
	<section class="content-main">
		<div class="content-header">
			<div>
				<h2 class="content-title card-title">Products List</h2>
				<p>Lorem ipsum dolor sit amet.</p>
			</div>
			<div><a class="btn btn-light rounded font-md" href="#">Export</a><a class="btn btn-light rounded font-md"
					href="#">Import</a><a class="btn btn-primary btn-sm rounded" th:href="@{/vendor/product/add}">Create
					new</a></div>
		</div>
		<div class="card mb-4">
			<header class="card-header">
				<div class="row align-items-center">
					<div class="col col-check flex-grow-0">
						<div class="form-check ms-2">
							<input class="form-check-input" type="checkbox" value="">
						</div>
					</div>
					<div class="col-md-3 col-12 me-auto mb-md-0 mb-3">
						<form id="venderCategorySearchForm" 
							  method="GET" 
							  th:action="@{/vendor/product/searchByVendorCategory}">
							<select class="form-select" name="categoryId" id="categorySelect">
								<option th:each="vendorCategory : ${vendorCategories}" th:value="${vendorCategory.id}"
									th:text="${vendorCategory.productCategories.name}"></option>
							</select>
						</form>
						<script>
							document.getElementById('categorySelect').addEventListener('change', function () {
								document.getElementById('venderCategorySearchForm').submit();
							});
						</script>
					</div>

				</div>
			</header>
			<!-- card-header end//-->
			<div class="card-body">
				<div class="row align-items-center fw-bold text-muted border-bottom pb-2 mb-3" style="font-size: 15px;">

					<div class="col-lg-3 col-sm-4 col-8 col-name">Product</div>
					<div class="col-lg-2 col-sm-2 col-4 col-price text-center">Description</div>
					<div class="col-lg-2 col-sm-2 col-4 col-status text-center">Price</div>
					<div class="col-lg-2 col-sm-2 col-4 col-date text-center">Category</div>
					<div class="col-lg-2 col-sm-2 col-4 col-action text-end pe-2">Actions</div>
				</div>



				<th:block th:each="product : ${products}">
					<article class="itemlist">
						<div class="row align-items-center">

							<div class="col-lg-3 col-sm-4 col-8 flex-grow-1 col-name">
								<a class="itemside" href="#">
									<div class="left">
										<th:block th:if="${product.mediases[0].name.contains('https:')}">
											<img class="img-sm img-thumbnail" th:src="${product.mediases[0].name}"
												alt="Item">
										</th:block>
										<th:block th:if="${!product.mediases[0].name.contains('https:')}">
											<img class="img-sm img-thumbnail"
												th:src="@{'/assets/imgs/others/' + ${product.mediases[0].name}}"
												alt="Item">
										</th:block>
									</div>
									<div class="info">
										<h6 class="mb-0" th:text="${product.name}"></h6>
									</div>
								</a>
							</div>
							<div class="col-lg-2 col-sm-2 col-4 col-price"><span
									th:text="${product.description}"></span></div>
							<div class="col-lg-2 col-sm-2 col-4 col-status"><span th:text="${product.price}"></span>
							</div>
							<div class="col-lg-2 col-sm-2 col-4 col-date"><span
									th:text="${product.productCategories.name}"></span></div>
							<div class="col-lg-2 col-sm-2 col-4 col-action text-end">

								<a class="btn btn-sm font-sm rounded btn-brand mr-5"
									th:href="@{'/vendor/product/edit/' + ${product.id}}">
									<i class="material-icons md-edit"></i> Edit
								</a>
								<a class="btn btn-sm font-sm rounded btn-danger text-white"
									th:href="@{'/vendor/product/details/' + ${product.id}}">
									<i class="material-icons md-delete	"></i>
								</a>
							</div>
						</div>
						<!-- row .//-->
						<!-- itemlist  .//-->
					</article>
				</th:block>


			</div>
		</div>
		<!-- card end//-->

		<!-- Trường hợp danh sách tất cả sản phẩm -->
			<div class="pagination-area mt-15 mb-50">
				<nav aria-label="Page navigation example">
					<ul class="pagination justify-content-start">
						<!-- Nút trước -->
						<li class="page-item"
							th:classappend="${currentPages == 0} ? 'disabled'"><a
							th:href="@{'/vendor/product/list?page=' + ${currentPages-1}}"
							class="page-link" aria-label="Previous"> <i
								class="material-icons md-chevron_left"></i>
						</a></li>

						<!-- Các trang -->
						<th:block th:each="i : ${#numbers.sequence(0, lastPageIndex)}">

							<li class="page-item"
								th:classappend="${i} == ${currentPages} ? 'active'"><a
								class="page-link"
								th:href="@{'/vendor/product/list?page=' + ${i}}"
								th:text="${i + 1}"></a></li>
						</th:block>

						<!-- Nút tiếp -->
						<li class="page-item"
							th:classappend="${currentPages + 1 >= totalPages} ? 'disabled'">
							<a class="page-link"
							th:href="@{'/vendor/product/list?page=' + ${currentPages+1}}"
							aria-label="Next"> <i class="material-icons md-chevron_right"></i>
						</a>
						</li>
					</ul>
				</nav>
			</div>
	</section>
</body>